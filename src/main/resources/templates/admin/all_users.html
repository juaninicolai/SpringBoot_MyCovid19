<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>ALL USERS shmovid-19</title>
    <link
            rel="stylesheet"
            href="https://use.fontawesome.com/releases/v5.3.1/css/all.css"
            integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU"
            crossorigin="anonymous"
    />
    <link
            href="https://unpkg.com/tailwindcss@next/dist/tailwind.min.css"
            rel="stylesheet"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  </head>
<body>
<button type="button"><a href="/">Back to Home</a></button>

<form method="post" action="/create_user">
  <input type="text" name="firstName">
  <input type="text" name="lastName">
  <input type="text" name="dateOfBirth">
  <input type="submit" value="Add user">
</form>

<!-- <form action="/admin/all_users" method="get" >
  <input id="txtSearch" type="text" name="keyword">
  <button type="submit">search</button>
</form> -->

<!--
<form action="/admin/all_users" method="get" >
  <input id="txtSearch" type="text" placeholder="user name or last name" onkeyup="userSearch()">
 <button onclick="userSearch()" type="submit">search</button>
</form> -->


<table id="usersTable" class="ml-auto mr-auto table-auto p-5 text-gray-700" >
  <tr>
    <th>ID</th>
    <th>Name</th>
    <th>Last name</th>
    <th>DoB</th>
    <th>Phone nr</th>
    <th>Street</th>
    <th>House nr</th>
    <th>District</th>
    <th>Email</th>
    <th>Password</th>
    <th></th>
  </tr>


<form th:each = "user : ${usersProfileInfo}" action="/update_user_info" method="post">
  <tr>
    <td>
      <input name="userId" th:value="${user.userId}"/>
    </td>
    <td>
      <input id="name" type="text" name="firstName"  th:value="${user.firstName}">
    </td>
    <td>
      <input id="lastName" type="text" name= "lastName" th:value="${user.lastName}">
    </td>
    <td>
      <input type="text" name="dateOfBirth" th:value="${user.dateOfBirth}">

    </td>
    <td>
      <input type="text" name="phoneNumber"  th:value="${user.phoneNumber != null} ? ${user.phoneNumber} : 'n/a'">
    </td>
    <td>
      <input type="text" name="streetName"  th:value="${user.streetName != null} ? ${user.streetName} : 'n/a'">
    </td>
    <td>
      <input type="text" name="homeNumber"  th:value="${user.homeNumber != null} ? ${user.homeNumber} : 'n/a'">
    </td>
    <td>
      <input type="text" name="userDistrict" th:value="${user.userDistrict != null} ? ${user.userDistrict} : 'n/a'">
    </td>
    <td>
      <input type="text" name= "userEmail" th:value="${user.userEmail != null} ? ${user.userEmail} : 'n/a'">
    </td>
    <td>
      <input type="text" name= "userPassword"  th:value="${user.userPassword != null} ? ${user.userPassword} : 'n/a'">
    </td>
    <td>
      <input type="submit" name="delete" value="Delete">
      <input type="submit" name="update" value="Update">

    </td>
    </tr>
</form>
</table>
<script>
  $( document ).ready(function() {
    console.log( "ready!" );
    const userSearch = () => {
      let input = document.getElementById("txtSearch");
      let key = input.value.toUpperCase();
      let usersTable = document.getElementById("myTable");
      let tr = usersTable.getElementsByTagName("tr");

      for (let i = 0; i < tr.length; i++) {
        let tdName = tr[i].getElementsByTagName("td")[0];
        let nameInput = tdName.getElementById("name").value;

        let tdLastName = tr[i].getElementsByTagName("td")[1];
        let innerLastNameInput = tdLastName.getElementById("lastName").value;
        console.log(nameInput);
        console.log(innerLastNameInput);


        if (tdName && tdLastName) {
          if (tdName.contains(key) || innerLastNameInput.contains(key)) {
            tr[i].style.display = "";
          } else {
            tr[i].style.display = "none";
          }
        }

      }
    }
  });
/*
  window.addEventListener("DOMContentLoaded", function() {
    function userSearch() {
      let input = document.getElementById("txtSearch");
      let key = input.value.toUpperCase();
      let usersTable = document.getElementById("myTable");
      let tr = usersTable.getElementsByTagName("tr");

      for (let i = 0; i < tr.length; i++) {
        let tdName = tr[i].getElementsByTagName("td")[0];
        let nameInput = tdName.getElementById("name").value;

        let tdLastName = tr[i].getElementsByTagName("td")[1];
        let innerLastNameInput = tdLastName.getElementById("lastName").value;
        console.log(nameInput);
        console.log(innerLastNameInput);


        if (tdName && tdLastName) {
          if (tdName.contains(key) || innerLastNameInput.contains(key)) {
            tr[i].style.display = "";
          } else {
            tr[i].style.display = "none";
          }
        }

      }
    }  }, false);
*/
</script>
</body>
</html>

<!--
<input type="text" name="firstName" style="width: 100px;" th:value="${user.firstName}">
  <input type="text" name= "lastName" style="width: 100px;"th:value="${user.lastName}">
  <input type="text" name="dateOfBirth" style="width: 100px;"th:value="${user.dateOfBirth}">
  <input type="text" name="phoneNumber" style="width: 100px;"th:value="${user.phoneNumber}">
  <input type="text" name="streetName" style="width: 100px;"th:value="${user.streetName}">
  <input type="text" name="streetName" style="width: 100px;"th:value="${user.homeNumber}">
  <input type="text" name="userDistrict" style="width: 130px;"th:value="${user.userDistrict}">
  <input type="text" name= "userEmail" style="width: 200px;"th:value="${user.userEmail}">
  <input type="text" name= "userPassword" style="width: 130px;"th:value="${user.userPassword}">
-->